{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nimport { deleteDeviceFromBasket } from \"../http/deviceAPI\";\nexport default class BasketStoreStore {\n  constructor() {\n    this._totalPrice = 0;\n    this._basket = [];\n    makeAutoObservable(this);\n  }\n  async setDeleteItemBasket(device, isAuth = false) {\n    if (isAuth) {\n      await deleteDeviceFromBasket(device.id).then(() => {\n        this._basket = this._basket.filter(item => item.id !== device.id);\n        this._totalPrice -= device.price * device.count;\n      });\n    } else {\n      this._basket = this._basket.filter(item => item.id !== device.id);\n      this._totalPrice -= device.price * device.count;\n      localStorage.setItem(\"basket\", JSON.stringify(this._basket));\n    }\n  }\n  setBasket(item, isAuth = false) {\n    const checkDeviceInBasket = this._basket.findIndex(device => device.id === item.id);\n    if (checkDeviceInBasket < 0) {\n      this._basket = [...this._basket, {\n        count: 1,\n        ...item\n      }];\n      let totalPrice = 0;\n      this._basket.forEach(device => totalPrice += Number(device.price * device.count));\n      this._totalPrice = totalPrice;\n    }\n    if (!isAuth) {\n      localStorage.setItem(\"basket\", JSON.stringify(this._basket));\n    }\n  }\n  setDeleteAllDeviceFromBasket() {\n    this._totalPrice = 0;\n    return this._basket = [];\n  }\n  setCountDevice(deviceId, action, isAuth = false) {\n    const itemInd = this._basket.findIndex(item => item.id === deviceId);\n    const itemInState = this._basket.find(device => device.id === deviceId);\n    if (action === \"+\") {\n      const newItem = {\n        ...itemInState,\n        count: ++itemInState.count\n      };\n      this._basket = [...this._basket.slice(0, itemInd), newItem, ...this._basket.slice(itemInd + 1)];\n    } else {\n      const newItem = {\n        ...itemInState,\n        count: itemInState.count === 1 ? 1 : --itemInState.count\n      };\n      this._basket = [...this._basket.slice(0, itemInd), newItem, ...this._basket.slice(itemInd + 1)];\n    }\n    if (!isAuth) {\n      localStorage.setItem(\"basket\", JSON.stringify(this._basket));\n    }\n    let totalPrice = 0;\n    this._basket.forEach(device => totalPrice += Number(device.price * device.count));\n    this._totalPrice = totalPrice;\n  }\n  resetBasket() {\n    this._basket = [];\n    this._totalPrice = 0;\n    localStorage.removeItem('basket');\n  }\n  get Basket() {\n    return this._basket;\n  }\n  get Price() {\n    return this._totalPrice;\n  }\n}","map":{"version":3,"names":["makeAutoObservable","deleteDeviceFromBasket","BasketStoreStore","constructor","_totalPrice","_basket","setDeleteItemBasket","device","isAuth","id","then","filter","item","price","count","localStorage","setItem","JSON","stringify","setBasket","checkDeviceInBasket","findIndex","totalPrice","forEach","Number","setDeleteAllDeviceFromBasket","setCountDevice","deviceId","action","itemInd","itemInState","find","newItem","slice","resetBasket","removeItem","Basket","Price"],"sources":["C:/Users/18062/OneDrive/Рабочий стол/ВУУУУУУУУУУУЗ/3 КУРС 2 6 СЕМАК/12312312313213123/onlineStore-master/onlineStore-master/client/src/store/BasketStore.js"],"sourcesContent":["import {makeAutoObservable} from \"mobx\";\nimport {deleteDeviceFromBasket} from \"../http/deviceAPI\";\n\nexport default class BasketStoreStore {\n    constructor() {\n        this._totalPrice = 0;\n        this._basket = [];\n        makeAutoObservable(this);\n    }\n\n    async setDeleteItemBasket(device, isAuth = false) {\n        if(isAuth) {\n            await deleteDeviceFromBasket(device.id).then(() => {\n                this._basket = this._basket.filter(item => item.id !== device.id);\n                this._totalPrice -=  device.price * device.count;\n            });\n        } else {\n            this._basket = this._basket.filter(item => item.id !== device.id);\n            this._totalPrice -=  device.price * device.count;\n\n            localStorage.setItem(\"basket\", JSON.stringify(this._basket));\n        }\n    }\n\n    setBasket(item, isAuth = false) {\n        const checkDeviceInBasket = this._basket.findIndex(device => device.id === item.id);\n        if(checkDeviceInBasket < 0) {\n            this._basket = [...this._basket, { count: 1, ...item}];\n            let totalPrice = 0;\n            this._basket.forEach(device => totalPrice += Number(device.price * device.count));\n            this._totalPrice = totalPrice;\n        }\n\n        if(!isAuth) {\n            localStorage.setItem(\"basket\", JSON.stringify(this._basket));\n        }\n    }\n\n    setDeleteAllDeviceFromBasket() {\n        this._totalPrice = 0;\n        return this._basket = [];\n    }\n\n    setCountDevice(deviceId, action, isAuth = false) {\n        const itemInd = this._basket.findIndex(item => item.id === deviceId);\n        const itemInState = this._basket.find(device => device.id === deviceId);\n        if (action === \"+\") {\n            const newItem = {\n                ...itemInState,\n                count: ++itemInState.count\n            }\n            this._basket = [...this._basket.slice(0, itemInd), newItem, ...this._basket.slice(itemInd + 1)]\n        } else {\n            const newItem = {\n                ...itemInState,\n                count: itemInState.count === 1 ? 1 : --itemInState.count\n            }\n            this._basket = [...this._basket.slice(0, itemInd), newItem, ...this._basket.slice(itemInd + 1)]\n        }\n\n        if(!isAuth) {\n            localStorage.setItem(\"basket\", JSON.stringify(this._basket));\n        }\n\n        let totalPrice = 0;\n        this._basket.forEach(device => totalPrice += Number(device.price * device.count));\n        this._totalPrice = totalPrice;\n    }\n\n    resetBasket() {\n        this._basket = [];\n        this._totalPrice = 0;\n        localStorage.removeItem('basket');\n    }\n\n\n    get Basket() {\n        return this._basket;\n    }\n\n    get Price() {\n        return this._totalPrice;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}