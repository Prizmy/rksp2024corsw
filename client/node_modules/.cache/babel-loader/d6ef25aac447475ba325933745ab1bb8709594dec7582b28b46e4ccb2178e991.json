{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Col,Container,Dropdown,ListGroup,Pagination,Row,Spinner}from\"react-bootstrap\";import{fetchOrders}from\"../http/ordersAPI\";import ItemOneOrderInAdmin from\"../components/itemOneorderInAdmin\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Orders=()=>{var _orders$rows;const[loading,setLoading]=useState(false);const[orders,setOrders]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[count,setCount]=useState(0);const[filter,setFilter]=useState(\"All\");const[rerender,setRerender]=useState(false);//pagination\nconst limit=5;const pageCount=Math.ceil(Number(count)/limit);const pages=[];useEffect(()=>{fetchOrders({limit,page:1}).then(data=>{setOrders(data);setLoading(false);setCount(data.count);});},[]);useEffect(()=>{setLoading(true);fetchOrders({limit,page:currentPage}).then(data=>{setOrders(data);setLoading(false);});},[currentPage]);useEffect(()=>{setLoading(true);fetchOrders({limit,page:1,complete:filter}).then(data=>{setOrders(data);setLoading(false);setCount(data.count);setCurrentPage(1);});},[filter]);//re-render after change status, or delete some order\nuseEffect(()=>{setLoading(true);fetchOrders({limit,page:currentPage,complete:filter}).then(data=>{setOrders(data);setLoading(false);setCount(data.count);setCurrentPage(1);});},[rerender]);const reRender=()=>{setRerender(!rerender);};if(loading){return/*#__PURE__*/_jsx(Spinner,{animation:\"grow\"});}for(let number=1;number<pageCount+1;number++){pages.push(/*#__PURE__*/_jsx(Pagination.Item,{active:number===currentPage,onClick:()=>setCurrentPage(number),children:number},number));}return/*#__PURE__*/_jsxs(Container,{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{xs:12,className:\"mt-3 d-flex justify-content-center align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mr-3\",children:\"Filter:\"}),/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{variant:\"success\",id:\"dropdown-basic\",children:filter}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[filter===\"all\"?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:\"All\"}):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:()=>setFilter(\"all\"),children:\"All\"}),filter===\"completed\"?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:\"Completed\"}):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:()=>setFilter(\"completed\"),children:\"Completed\"}),filter===\"not-completed\"?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:\"Not Completed\"}):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:()=>setFilter(\"not-completed\"),children:\"Not Completed\"})]})]})]})}),/*#__PURE__*/_jsx(ListGroup,{children:(_orders$rows=orders.rows)===null||_orders$rows===void 0?void 0:_orders$rows.map(_ref=>{let{id,complete,mobile,createdAt,updatedAt,userId}=_ref;return/*#__PURE__*/_jsx(ItemOneOrderInAdmin,{id:id,complete:complete,mobile:mobile,createdAt:createdAt,updatedAt:updatedAt,userId:userId,reRender:reRender},id);})}),/*#__PURE__*/_jsx(Pagination,{size:\"sm\",className:\"mt-4 mb-4\",style:{margin:\"0 auto\"},children:pages})]});};export default Orders;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}