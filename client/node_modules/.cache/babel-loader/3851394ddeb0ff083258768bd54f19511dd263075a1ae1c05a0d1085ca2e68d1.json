{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Button,Col,Container,Dropdown,Form,Image,InputGroup,ListGroup,Pagination,Row}from\"react-bootstrap\";import CreateDevice from\"../components/modals/CreateDevice\";import CreateBrand from\"../components/modals/CreateBrand\";import CreateType from\"../components/modals/CreateType\";import{getAllDevicesInAdminPage}from\"../http/deviceAPI\";import{NavLink}from\"react-router-dom\";import{DEVICE_EDIT_ROUTE}from\"../utils/consts\";import DeleteBrandOrType from\"../components/modals/DeleteBrandOrType\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Admin=()=>{const[brandVisible,setBrandVisible]=useState(false);const[typeVisible,setTypeVisible]=useState(false);const[deviceVisible,setDeviceVisible]=useState(false);const[deleteBrandOrType,setDeleteBrandOrType]=useState(false);const[searchDevice,setSearchDevice]=useState('');const[searchedDevice,setSearchedDevice]=useState([]);const[filter,setFilter]=useState(\"All\");const[currentPage,setCurrentPage]=useState(1);const[count,setCount]=useState(1);const[successMsg,setSuccessMsg]=useState('');const[showSuccessMsg,setShowSuccessMsg]=useState(false);//pagination\nconst limit=5;const pageCount=Math.ceil(Number(count)/limit);const pages=[];for(let number=1;number<pageCount+1;number++){pages.push(/*#__PURE__*/_jsx(Pagination.Item,{active:number===currentPage,onClick:()=>setCurrentPage(number),children:number},number));}useEffect(()=>{getAllDevicesInAdminPage(searchDevice,currentPage,filter).then(_ref=>{let{count,rows}=_ref;setSearchedDevice(rows);setCount(count);});},[currentPage]);useEffect(()=>{getAllDevicesInAdminPage(searchDevice,1,filter).then(_ref2=>{let{count,rows}=_ref2;setSearchedDevice(rows);setCount(count);setCurrentPage(1);});},[filter,successMsg]);const fetchDevice=()=>{getAllDevicesInAdminPage(searchDevice,currentPage,filter).then(_ref3=>{let{count,rows}=_ref3;setSearchedDevice(rows);setCount(count);});};const showSuccessMsgFunc=msg=>{setSuccessMsg(msg);setShowSuccessMsg(true);setTimeout(()=>setShowSuccessMsg(false),5000);};return/*#__PURE__*/_jsxs(Container,{className:\"d-flex flex-column\",children:[showSuccessMsg&&/*#__PURE__*/_jsx(\"p\",{children:successMsg}),/*#__PURE__*/_jsx(Button,{onClick:()=>setTypeVisible(true),variant:\"outline-dark\",className:\"mt-4 p-2\",children:\"Add type\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setBrandVisible(true),variant:\"outline-dark\",className:\"mt-4 p-2\",children:\"Add brand\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setDeviceVisible(true),variant:\"outline-dark\",className:\"mt-4 p-2\",children:\"Add device\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setDeleteBrandOrType(true),variant:\"outline-dark\",className:\"mt-4 p-2\",children:\"Delete type of brand\"}),/*#__PURE__*/_jsx(CreateDevice,{show:deviceVisible,onHide:()=>setDeviceVisible(false)}),/*#__PURE__*/_jsx(CreateBrand,{show:brandVisible,onHide:()=>setBrandVisible(false)}),/*#__PURE__*/_jsx(CreateType,{show:typeVisible,onHide:()=>setTypeVisible(false)}),/*#__PURE__*/_jsx(DeleteBrandOrType,{show:deleteBrandOrType,onHide:()=>setDeleteBrandOrType(false),showSuccessMsgFunc:showSuccessMsgFunc}),/*#__PURE__*/_jsxs(Dropdown,{className:\"mt-5 mb-3\",style:{margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{variant:\"success\",id:\"dropdown-basic\",children:filter}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[filter===\"All\"?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:\"All\"}):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:()=>setFilter(\"All\"),children:\"All\"}),filter===\"Without Brand or Type\"?/*#__PURE__*/_jsx(Dropdown.Item,{disabled:true,children:\"Without Brand or Type\"}):/*#__PURE__*/_jsx(Dropdown.Item,{onClick:()=>setFilter(\"Without Brand or Type\"),children:\"Without Brand or Type\"})]})]}),/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Control,{\"aria-label\":\"Default\",\"aria-describedby\":\"inputGroup-sizing-default\",value:searchDevice,onChange:e=>setSearchDevice(e.target.value),placeholder:\"Input device name...\"}),/*#__PURE__*/_jsx(Button,{onClick:fetchDevice,variant:\"outline-dark\",className:\"ml-2\",children:\"Search\"})]}),/*#__PURE__*/_jsx(ListGroup,{children:searchedDevice&&searchedDevice.map(_ref4=>{let{id,img,brand,type,price,name}=_ref4;return/*#__PURE__*/_jsx(ListGroup.Item,{className:\"mt-3\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:2,children:/*#__PURE__*/_jsx(Image,{width:150,src:process.env.REACT_APP_API_URL+img})}),/*#__PURE__*/_jsxs(Col,{xs:8,children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xs:12,children:/*#__PURE__*/_jsxs(NavLink,{to:DEVICE_EDIT_ROUTE+\"/\".concat(id),children:[\"id: \",id]})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{xs:12,children:[\"Name: \",name]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{xs:12,children:[\"Price: \",price]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{xs:12,children:[\"Brand: \",brand.name]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{xs:12,children:[\"Type: \",type.name]})})]}),/*#__PURE__*/_jsx(Col,{xs:2,children:/*#__PURE__*/_jsx(NavLink,{to:DEVICE_EDIT_ROUTE+\"/\".concat(id),children:\"Edit\"})})]})},id);})}),/*#__PURE__*/_jsx(Pagination,{size:\"sm\",className:\"mt-4 mb-4\",style:{margin:\"0 auto\"},children:searchedDevice&&searchedDevice.length>0?pages:false})]});};export default Admin;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}